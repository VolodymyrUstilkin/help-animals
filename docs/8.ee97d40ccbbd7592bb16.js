(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{aLRU:function(e,t,i){"use strict";i.r(t),i.d(t,"AdminAnimalsModule",function(){return U});var n=i("ofXK"),a=i("tyNb"),s=i("tk/3"),o=i("hVSr"),r=i("akkN");const l=r.a.serverHost+r.a.apiUrl+"/animals_admin";var d=i("fXoL"),b=i("oULQ");function c(e,t){if(1&e&&(d.Nb(0,"tr"),d.Nb(1,"td"),d.nc(2),d.Mb(),d.Nb(3,"td"),d.nc(4),d.Mb(),d.Nb(5,"td"),d.nc(6),d.Mb(),d.Nb(7,"td"),d.nc(8),d.Mb(),d.Nb(9,"td"),d.nc(10),d.Mb(),d.Nb(11,"td"),d.nc(12),d.Mb(),d.Nb(13,"td"),d.Nb(14,"a",6),d.nc(15,"\u270d"),d.Mb(),d.Mb(),d.Mb()),2&e){const e=t.$implicit,i=d.Yb();d.yb(2),d.oc(e.id),d.yb(2),d.oc(e.responsiblePerson),d.yb(2),d.oc(e.sterilization?"\u2714":"\u2718"),d.yb(2),d.oc(e.rabiesVaccination?"\u2714":"\u2718"),d.yb(2),d.oc(e.complexVaccination?"\u2714":"\u2718"),d.yb(2),d.oc(e.animalHasFamily?"\u2714":"\u2718"),d.yb(2),d.cc("routerLink",i.getRedirectToAnimalDetailsLink(e.id))}}let m=(()=>{class e{constructor(e,t,i){this.httpClient=e,this.userAuthService=t,this.activatedRoute=i,this.animalList=[],this.pagination=new o.a,this.pagination.url="/admin/animals",this.querySubscription=this.activatedRoute.queryParams.subscribe(e=>{this.pagination.page=e.page||this.pagination.page,this.pagination.perPage=e.per_page||this.pagination.perPage,this.getAnimals()})}ngOnDestroy(){this.querySubscription.unsubscribe()}getAnimals(){const e=(new s.f).appendAll(this.pagination.getQueryParams());this.httpClient.get(l,{params:e,observe:"response"}).subscribe(e=>{e.body&&(this.animalList=e.body.map(e=>({id:e.id,complexVaccination:e.complex_vaccination,rabiesVaccination:e.rabies_vaccination,sterilization:e.sterilization,animalHasFamily:e.animal_has_family,responsiblePerson:e.responsible_person})),this.pagination.setFromResponseHeaders(e.headers))})}getRedirectToAnimalDetailsLink(e){return`/admin/animals/${e}`}getRedirectToAddLink(){return"/admin/animals/add"}}return e.\u0275fac=function(t){return new(t||e)(d.Ib(s.b),d.Ib(b.a),d.Ib(a.a))},e.\u0275cmp=d.Cb({type:e,selectors:[["app-admin-animal-list"]],decls:21,vars:3,consts:[[1,"admin-animal-list-container"],[1,"admin-animal-list-header"],["type","button",1,"button",3,"routerLink"],[1,"table"],[4,"ngFor","ngForOf"],[3,"pagination"],[1,"admin-animal-list-redirect-edit-animal",3,"routerLink"]],template:function(e,t){1&e&&(d.Nb(0,"div",0),d.Nb(1,"div",1),d.Nb(2,"button",2),d.nc(3,"\u0414\u043e\u0434\u0430\u0442\u0438 \u0442\u0432\u0430\u0440\u0438\u043d\u043a\u0443"),d.Mb(),d.Mb(),d.Nb(4,"table",3),d.Nb(5,"tr"),d.Nb(6,"th"),d.nc(7,"id"),d.Mb(),d.Nb(8,"th"),d.nc(9,"\u0412\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u043b\u044c\u043d\u0430 \u043e\u0441\u043e\u0431\u0430"),d.Mb(),d.Nb(10,"th"),d.nc(11,"\u0421\u0442\u0435\u0440"),d.Mb(),d.Nb(12,"th"),d.nc(13,"\u0421\u043a\u0430\u0437"),d.Mb(),d.Nb(14,"th"),d.nc(15,"\u041a\u043e\u043c\u043f"),d.Mb(),d.Nb(16,"th"),d.nc(17,"\u0412\u043b\u0430\u0448"),d.Mb(),d.Jb(18,"th"),d.Mb(),d.lc(19,c,16,7,"tr",4),d.Mb(),d.Jb(20,"app-pagination",5),d.Mb()),2&e&&(d.yb(2),d.cc("routerLink",t.getRedirectToAddLink()),d.yb(17),d.bc("ngForOf",t.animalList),d.yb(1),d.bc("pagination",t.pagination))},directives:[a.c,n.i,o.b,a.d],styles:[".admin-animal-list-container[_ngcontent-%COMP%]{display:grid;grid-gap:10px}"]}),e})();var u=i("HDdC");class p{constructor(e,t){this.fileContent=t,this.lastModified=e.lastModified,this.name=e.name,this.size=e.size,this.type=e.type}static readAsDataURL(e){return new u.a(t=>{const i=new FileReader;i.onload=()=>{const n=new p(e,i.result);i.error?t.error(i.error):t.next(n),t.complete()},i.readAsDataURL(e)})}}var h=i("3Pt+"),y=i("xGl1");class f{static convertAnimalPostPatchRequestToFormData(e){const t=new FormData;return Object.entries(e).forEach(([e,i])=>{if(null==i)return;const n=g(e);t.set(n,"string"==typeof i||"object"==typeof i?i:i.toString())}),t}static convertAnimalGetResponseToAdminAnimalDetails(e){return{id:e.id,name:e.name,age:e.age,breed:e.breed,sex:e.sex,color:e.color,features:e.features,responsiblePerson:e.responsible_person,complexVaccination:e.complex_vaccination,rabiesVaccination:e.rabies_vaccination,sterilization:e.sterilization,animalHasFamily:e.animal_has_family,showInGallery:e.show_in_gallery,imageUrl:e.image?r.a.serverHost+e.image.file.url:"",createdAt:Object(y.a)(e.created_at),updatedAt:Object(y.a)(e.updated_at),editedBy:e.edited_by}}static convertToPdf(e){const t=window.open("","","height=400,width=600");t&&(t.document.write(M(`id: ${e.id}`)),t.document.write(M(`\u0406\u043c'\u044f: ${e.name}`)),t.document.write(M(`\u041f\u043e\u0440\u043e\u0434\u0430: ${e.breed}`)),t.document.write(M(`\u0421\u0442\u0430\u0442\u044c: ${e.sex}`)),t.document.write(M(`\u041a\u043e\u043b\u0456\u0440: ${e.color}`)),t.document.write(M(`\u041e\u0441\u043e\u0431\u043b\u0438\u0432\u043e\u0441\u0442\u0456: ${e.features}`)),t.document.write(M(`\u0412\u0456\u043a: ${e.age}`)),t.document.write(M(`\u0412\u0430\u043a\u0446\u0438\u043d\u0430\u0446\u0456\u044f \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u0430: ${e.complexVaccination}`)),t.document.write(M(`\u0412\u0430\u043a\u0446\u0438\u043d\u0430\u0446\u0456\u044f \u0432\u0456\u0434 \u0441\u043a\u0430\u0437\u0443: ${e.rabiesVaccination}`)),t.document.write(M(`\u0421\u0442\u0435\u0440\u0438\u043b\u0456\u0437\u0430\u0446\u0456\u044f: ${e.sterilization}`)),t.document.write(M(`\u0422\u0432\u0430\u0440\u0438\u043d\u0430 \u0432\u043b\u0430\u0448\u0442\u043e\u0432\u0430\u043d\u0430: ${e.animalHasFamily}`)),t.document.write(M(`\u0412\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u043b\u044c\u043d\u0430 \u043f\u0435\u0440\u0441\u043e\u043d\u0430: ${e.responsiblePerson}`)),t.document.write(M(`\u0414\u0430\u0442\u0430 \u0434\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u044f: ${e.createdAt}`)),t.document.write(M(`\u0414\u0430\u0442\u0430 \u043e\u0441\u0442. \u0437\u043c\u0456\u043d: ${e.updatedAt}`)),t.document.write(M(`ID \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0449\u043e \u0437\u043c\u0456\u043d\u044e\u0432\u0430\u0432: ${e.editedBy}`)),t.print(),t.close())}}const g=e=>e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`),M=e=>`<p style="font-size: 14px; color: #000; line-height: 1em">${e}</p>`;function N(e,t){1&e&&(d.Nb(0,"div"),d.Nb(1,"h4",37),d.nc(2,"\u041f\u0435\u0440\u0435\u0433\u043b\u044f\u0434 (\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f) \u0442\u0432\u0430\u0440\u0438\u043d\u0438:"),d.Mb(),d.Nb(3,"label",38),d.nc(4,"id:"),d.Mb(),d.Jb(5,"input",39),d.Mb())}function A(e,t){1&e&&(d.Nb(0,"div"),d.Nb(1,"h4",37),d.nc(2,"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f \u043d\u043e\u0432\u043e\u0457 \u0442\u0432\u0430\u0440\u0438\u043d\u0438:"),d.Mb(),d.Mb())}function v(e,t){if(1&e){const e=d.Ob();d.Nb(0,"button",35),d.Ub("click",function(){return d.ic(e),d.Yb().submitEditAnimal()}),d.nc(1,"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0437\u043c\u0456\u043d\u0438 "),d.Mb()}if(2&e){const e=d.Yb();d.bc("disabled",e.form.invalid)}}function R(e,t){if(1&e){const e=d.Ob();d.Nb(0,"button",35),d.Ub("click",function(){return d.ic(e),d.Yb().submitAddAnimal()}),d.nc(1,"\u0414\u043e\u0434\u0430\u0442\u0438 \u0442\u0432\u0430\u0440\u0438\u043d\u0443 "),d.Mb()}if(2&e){const e=d.Yb();d.bc("disabled",e.form.invalid)}}function C(e,t){if(1&e&&(d.Nb(0,"div",3),d.Nb(1,"label",40),d.nc(2,"\u0414\u0430\u0442\u0430 \u043e\u0441\u0442\u0430\u043d\u043d\u044c\u043e\u0433\u043e \u0440\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f:"),d.Mb(),d.Jb(3,"input",41),d.Mb()),2&e){const e=d.Yb();d.yb(3),d.cc("value",e.adminAnimalDetails.updatedAt)}}function w(e,t){if(1&e&&(d.Nb(0,"div",3),d.Nb(1,"label",42),d.nc(2,"\u0422\u0432\u0430\u0440\u0438\u043d\u0430 \u0434\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u044f \u0442\u0432\u0430\u0440\u0438\u043d\u0438:"),d.Mb(),d.Jb(3,"input",43),d.Mb()),2&e){const e=d.Yb();d.yb(3),d.cc("value",e.adminAnimalDetails.createdAt)}}function P(e,t){if(1&e&&(d.Nb(0,"div",3),d.Nb(1,"label",44),d.nc(2,"\u041e\u0441\u0442\u0430\u043d\u043d\u0456 \u0437\u043c\u0456\u043d\u0438 \u0432\u043d\u0435\u0441\u0435\u043d\u0456 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0435\u043c:"),d.Mb(),d.Jb(3,"input",45),d.Mb()),2&e){const e=d.Yb();d.yb(3),d.cc("value",e.adminAnimalDetails.editedBy)}}class q{constructor(){this.age=0,this.animalHasFamily=!1,this.breed="",this.color="",this.complexVaccination=!1,this.createdAt="",this.editedBy="",this.features="",this.id="",this.imageUrl="",this.name="",this.rabiesVaccination=!1,this.responsiblePerson="",this.sex="",this.showInGallery=!1,this.sterilization=!1,this.updatedAt=""}}let F=(()=>{class e{constructor(e,t,i,n,a){this.httpClient=e,this.activatedRouter=t,this.router=i,this.userAuthService=n,this.formBuilder=a,this.animalsChangePermission=this.userAuthService.getUser().permissionForAddEditAndRemoveAnimals,this.adminAnimalDetails=new q,this.formWasChanged=!1,this.imagePreview="",this.form=this.formBuilder.group({id:new h.d(""),name:new h.d(""),age:new h.d(0),breed:new h.d(""),sex:new h.d(""),color:new h.d(""),features:new h.d(""),responsiblePerson:new h.d(""),complexVaccination:new h.d(!1),rabiesVaccination:new h.d(!1),sterilization:new h.d(!1),animalHasFamily:new h.d(!1),showInGallery:new h.d(!1)}),this.getAnimal(t.snapshot.params.id),this.form.valueChanges.subscribe(e=>this.formWasChanged=!0)}getAnimal(e){e&&this.httpClient.get(`${l}/${e}`).subscribe(e=>{this.adminAnimalDetails=f.convertAnimalGetResponseToAdminAnimalDetails(e),this.form.setValue({id:this.adminAnimalDetails.id,name:this.adminAnimalDetails.name,age:this.adminAnimalDetails.age,breed:this.adminAnimalDetails.breed,sex:this.adminAnimalDetails.sex,color:this.adminAnimalDetails.color,features:this.adminAnimalDetails.features,responsiblePerson:this.adminAnimalDetails.responsiblePerson,complexVaccination:this.adminAnimalDetails.complexVaccination,rabiesVaccination:this.adminAnimalDetails.rabiesVaccination,sterilization:this.adminAnimalDetails.sterilization,animalHasFamily:this.adminAnimalDetails.animalHasFamily,showInGallery:this.adminAnimalDetails.showInGallery}),this.formWasChanged=!1})}formReadonlyFieldCheck(){return!this.animalsChangePermission}addPhoto(e){const t=e.target;if(!t.files)return;const i=t.files[0];p.readAsDataURL(i).subscribe(e=>{this.imagePreview=e.fileContent,this.loadedPhotoFile=i},e=>{alert("\u041d\u0435\u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0444\u0430\u0439\u043b: "+e)})}submitEditAnimal(){if(this.form.invalid)return void alert("\u0423 \u0444\u043e\u0440\u043c\u0456 \u0454 \u043f\u043e\u043c\u0438\u043b\u043a\u0438");const e=`${l}/${this.form.value.id}`,t=Object.assign(Object.assign({},this.form.value),{"image_attributes[file]":this.loadedPhotoFile||null}),i=f.convertAnimalPostPatchRequestToFormData(t);this.httpClient.patch(e,i).subscribe(()=>{this.getAnimal(this.form.value.id)},e=>this.submitErrorHandler(e))}submitAddAnimal(){if(this.form.invalid)return void alert("\u0423 \u0444\u043e\u0440\u043c\u0456 \u0454 \u043f\u043e\u043c\u0438\u043b\u043a\u0438");const e=Object.assign(Object.assign({},this.form.value),{"image_attributes[file]":this.loadedPhotoFile||null}),t=f.convertAnimalPostPatchRequestToFormData(e);this.httpClient.post(l,t).subscribe(e=>{this.router.navigateByUrl(`/admin/animals/${e.id}`)},e=>this.submitErrorHandler(e))}submitErrorHandler(e){alert("\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u0446\u0456 \u0444\u043e\u0440\u043c\u0438: "+e.message)}printAnimal(){f.convertToPdf(this.adminAnimalDetails)}}return e.\u0275fac=function(t){return new(t||e)(d.Ib(s.b),d.Ib(a.a),d.Ib(a.b),d.Ib(b.a),d.Ib(h.c))},e.\u0275cmp=d.Cb({type:e,selectors:[["app-admin-animal-details"]],decls:63,vars:23,consts:[[1,"admin-details"],[3,"formGroup"],[4,"ngIf"],[1,"admin-details-form-field-container"],["for","name",1,"label"],["id","name","formControlName","name","type","text",1,"input",3,"readonly"],["for","age",1,"label"],["id","age","formControlName","age","type","number",1,"input",3,"readonly"],["for","breed",1,"label"],["id","breed","formControlName","breed","type","text",1,"input",3,"readonly"],["for","sex",1,"label"],["id","sex","formControlName","sex","type","text",1,"input",3,"readonly"],["for","color",1,"label"],["id","color","formControlName","color","type","text",1,"input",3,"readonly"],["for","features",1,"label"],["id","features","formControlName","features","type","text",1,"input","input--multiline",3,"readonly"],["for","responsiblePerson",1,"label"],["id","responsiblePerson","formControlName","responsiblePerson","type","text",1,"input","input--multiline",3,"readonly"],["for","imgUrl",1,"label"],["width","100%","alt","Image preview...",3,"src"],["id","imgUrl","type","file","accept","image/png,image/jpeg",1,"input",3,"readonly","change"],[1,"label","admin-details-form-field-container"],[1,"key-value-table-style"],["for","complexVaccination",1,"label"],["id","complexVaccination","formControlName","complexVaccination","type","checkbox",1,"input",3,"readonly"],["for","rabiesVaccination",1,"label"],["id","rabiesVaccination","formControlName","rabiesVaccination","type","checkbox",1,"input",3,"readonly"],["for","sterilization",1,"label"],["id","sterilization","formControlName","sterilization","type","checkbox",1,"input",3,"readonly"],["for","animalHasFamily",1,"label"],["id","animalHasFamily","formControlName","animalHasFamily","type","checkbox",1,"input",3,"readonly"],["for","showInGallery",1,"label"],["id","showInGallery","formControlName","showInGallery","type","checkbox",1,"input",3,"readonly"],[1,"buttons-container"],["class","button admin-details-form-field-submit-button","type","button",3,"disabled","click",4,"ngIf"],["type","button",1,"button","admin-details-form-field-submit-button",3,"disabled","click"],["class","admin-details-form-field-container",4,"ngIf"],[1,"caption"],["for","id",1,"label"],["id","id","formControlName","id","readonly","readonly",1,"input"],["for","dateLastEdit",1,"label"],["id","dateLastEdit","readonly","readonly",1,"input",3,"value"],["for","dateAdded",1,"label"],["id","dateAdded","readonly","readonly",1,"input",3,"value"],["for","editedBy",1,"label"],["id","editedBy","readonly","readonly",1,"input",3,"value"]],template:function(e,t){1&e&&(d.Nb(0,"div",0),d.Nb(1,"form",1),d.lc(2,N,6,0,"div",2),d.lc(3,A,3,0,"div",2),d.Nb(4,"div",3),d.Nb(5,"label",4),d.nc(6,"\u0406\u043c'\u044f:"),d.Mb(),d.Jb(7,"input",5),d.Mb(),d.Nb(8,"div",3),d.Nb(9,"label",6),d.nc(10,"\u0412\u0456\u043a:"),d.Mb(),d.Jb(11,"input",7),d.Mb(),d.Nb(12,"div",3),d.Nb(13,"label",8),d.nc(14,"\u041f\u043e\u0440\u043e\u0434\u0430:"),d.Mb(),d.Jb(15,"input",9),d.Mb(),d.Nb(16,"div",3),d.Nb(17,"label",10),d.nc(18,"\u0421\u0442\u0430\u0442\u044c:"),d.Mb(),d.Jb(19,"input",11),d.Mb(),d.Nb(20,"div",3),d.Nb(21,"label",12),d.nc(22,"\u041a\u043e\u043b\u0456\u0440:"),d.Mb(),d.Jb(23,"input",13),d.Mb(),d.Nb(24,"div",3),d.Nb(25,"label",14),d.nc(26,"\u041e\u0441\u043e\u0431\u043b\u0438\u0432\u043e\u0441\u0442\u0456:"),d.Mb(),d.Jb(27,"textarea",15),d.Mb(),d.Nb(28,"div",3),d.Nb(29,"label",16),d.nc(30,"\u0412\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u043b\u044c\u043d\u0430 \u043f\u0435\u0440\u0441\u043e\u043d\u0430:"),d.Mb(),d.Jb(31,"textarea",17),d.Mb(),d.Nb(32,"div",3),d.Nb(33,"label",18),d.nc(34,"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f:"),d.Mb(),d.Jb(35,"img",19),d.Nb(36,"input",20),d.Ub("change",function(e){return t.addPhoto(e)}),d.Mb(),d.Mb(),d.Nb(37,"p",21),d.nc(38,"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0438 \u0442\u0432\u0430\u0440\u0438\u043d\u0438:"),d.Mb(),d.Nb(39,"section",22),d.Nb(40,"label",23),d.nc(41,"\u0412\u0430\u043a\u0446\u0438\u043d\u0430\u0446\u0456\u044f \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0441\u043d\u0430:"),d.Mb(),d.Jb(42,"input",24),d.Nb(43,"label",25),d.nc(44,"\u0412\u0430\u043a\u0446\u0438\u043d\u0430\u0446\u0456\u044f \u0432\u0456\u0434 \u0441\u043a\u0430\u0437\u0443:"),d.Mb(),d.Jb(45,"input",26),d.Nb(46,"label",27),d.nc(47,"\u0422\u0432\u0430\u0440\u0438\u043d\u0430 \u0441\u0442\u0435\u0440\u0438\u043b\u0456\u0437\u043e\u0432\u0430\u043d\u0430:"),d.Mb(),d.Jb(48,"input",28),d.Nb(49,"label",29),d.nc(50,"\u0422\u0432\u0430\u0440\u0438\u043d\u0430 \u0432\u043b\u0430\u0448\u0442\u043e\u0432\u0430\u043d\u0430:"),d.Mb(),d.Jb(51,"input",30),d.Nb(52,"label",31),d.nc(53,"\u0412\u0456\u0434\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u0438 \u0432 \u0433\u0430\u043b\u0435\u0440\u0435\u0457:"),d.Mb(),d.Jb(54,"input",32),d.Mb(),d.Mb(),d.Nb(55,"div",33),d.lc(56,v,2,1,"button",34),d.lc(57,R,2,1,"button",34),d.Nb(58,"button",35),d.Ub("click",function(){return t.printAnimal()}),d.nc(59,"\u0414\u0440\u0443\u043a\u0443\u0432\u0430\u0442\u0438 "),d.Mb(),d.Mb(),d.lc(60,C,4,1,"div",36),d.lc(61,w,4,1,"div",36),d.lc(62,P,4,1,"div",36),d.Mb()),2&e&&(d.yb(1),d.bc("formGroup",t.form),d.yb(1),d.bc("ngIf",t.form.value.id),d.yb(1),d.bc("ngIf",!t.form.value.id),d.yb(4),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(4),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(4),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(4),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(4),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(4),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(4),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(4),d.cc("src",t.imagePreview||t.adminAnimalDetails.imageUrl,d.jc),d.yb(1),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(6),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(3),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(3),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(3),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(3),d.bc("readonly",t.formReadonlyFieldCheck()),d.yb(2),d.bc("ngIf",t.form.value.id&&t.animalsChangePermission),d.yb(1),d.bc("ngIf",!t.form.value.id&&t.animalsChangePermission),d.yb(1),d.bc("disabled",t.formWasChanged),d.yb(2),d.bc("ngIf",t.adminAnimalDetails.updatedAt),d.yb(1),d.bc("ngIf",t.adminAnimalDetails.updatedAt),d.yb(1),d.bc("ngIf",t.adminAnimalDetails.updatedAt))},directives:[h.o,h.j,h.g,n.j,h.b,h.i,h.f,h.l,h.a],styles:[".admin-details[_ngcontent-%COMP%]{padding-top:15px;margin:0 auto;max-width:600px}.admin-details-form-field-container[_ngcontent-%COMP%]{padding-top:10px;display:grid}.input--multiline[_ngcontent-%COMP%]{min-height:5em;height:auto}.caption[_ngcontent-%COMP%]{font-size:var(--default-component-font-size);font-weight:600;text-align:center}.buttons-container[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;max-width:600px}"]}),e})();class x{static convertOpenedAnimalFindRequestGetResponseToOpenedAnimalFindRequest(e){return e.map(e=>({id:e.id,address:e.address,userCreatedId:e.user_created_id,openedDate:Object(y.a)(e.opened_date)}))}static convertClosedAnimalFindRequestGetResponseToClosedAnimalFindRequest(e){return e.map(e=>({id:e.id,address:e.address,userCreatedId:e.user_created_id,userClosedId:e.user_created_id,openedDate:Object(y.a)(e.opened_date),closedDate:Object(y.a)(e.closed_date)}))}}function k(e,t){if(1&e){const e=d.Ob();d.Nb(0,"tr"),d.Nb(1,"td"),d.nc(2),d.Mb(),d.Nb(3,"td"),d.nc(4),d.Mb(),d.Nb(5,"td"),d.nc(6),d.Mb(),d.Nb(7,"td"),d.nc(8),d.Mb(),d.Nb(9,"td"),d.Nb(10,"button",11),d.Ub("click",function(){d.ic(e);const i=t.$implicit;return d.Yb(2).closeAnimalFindRequest(i.id)}),d.nc(11,"\u0417\u0430\u043a\u0440\u0438\u0442\u0438 "),d.Mb(),d.Mb(),d.Mb()}if(2&e){const e=t.$implicit;d.yb(2),d.oc(e.id),d.yb(2),d.oc(e.address),d.yb(2),d.oc(e.userCreatedId),d.yb(2),d.oc(e.openedDate)}}function D(e,t){if(1&e&&(d.Nb(0,"section"),d.Nb(1,"table",9),d.Nb(2,"tr"),d.Nb(3,"th"),d.nc(4,"id"),d.Mb(),d.Nb(5,"th"),d.nc(6,"\u0410\u0434\u0440\u0435\u0441\u0430"),d.Mb(),d.Nb(7,"th"),d.nc(8,"\u0421\u0442\u0432\u043e\u0440\u0438\u0432"),d.Mb(),d.Nb(9,"th"),d.nc(10,"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u0430"),d.Mb(),d.Nb(11,"th"),d.nc(12,"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"),d.Mb(),d.Mb(),d.lc(13,k,12,4,"tr",10),d.Mb(),d.Mb()),2&e){const e=d.Yb();d.yb(13),d.bc("ngForOf",e.animalOpenedRequestList)}}function O(e,t){if(1&e&&(d.Nb(0,"tr"),d.Nb(1,"td"),d.nc(2),d.Mb(),d.Nb(3,"td"),d.nc(4),d.Mb(),d.Nb(5,"td"),d.nc(6),d.Mb(),d.Nb(7,"td"),d.nc(8),d.Mb(),d.Nb(9,"td"),d.nc(10),d.Mb(),d.Nb(11,"td"),d.nc(12),d.Mb(),d.Mb()),2&e){const e=t.$implicit;d.yb(2),d.oc(e.id),d.yb(2),d.oc(e.address),d.yb(2),d.oc(e.userCreatedId),d.yb(2),d.oc(e.openedDate),d.yb(2),d.oc(e.userClosedId),d.yb(2),d.oc(e.closedDate)}}function _(e,t){if(1&e&&(d.Nb(0,"section"),d.Nb(1,"table",9),d.Nb(2,"tr"),d.Nb(3,"th"),d.nc(4,"id"),d.Mb(),d.Nb(5,"th"),d.nc(6,"\u0410\u0434\u0440\u0435\u0441\u0430"),d.Mb(),d.Nb(7,"th"),d.nc(8,"\u0421\u0442\u0432\u043e\u0440\u0438\u0432"),d.Mb(),d.Nb(9,"th"),d.nc(10,"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u0430"),d.Mb(),d.Nb(11,"th"),d.nc(12,"\u0417\u0430\u043a\u0440\u0438\u0432"),d.Mb(),d.Nb(13,"th"),d.nc(14,"\u0417\u0430\u043a\u0440\u0438\u0442\u0430"),d.Mb(),d.Mb(),d.lc(15,O,13,6,"tr",10),d.Mb(),d.Mb()),2&e){const e=d.Yb();d.yb(15),d.bc("ngForOf",e.animalClosedRequestList)}}const I=r.a.serverHost+r.a.apiUrl+"/opened-requests",T=r.a.serverHost+r.a.apiUrl+"/closed-requests",$="/admin/animals/find-requests",L=[{path:"list",component:m},{path:"add",component:F},{path:"find-requests",component:(()=>{class e{constructor(e,t,i,n){this.httpClient=e,this.userAuthService=t,this.activatedRoute=i,this.router=n,this.animalOpenedRequestList=[],this.animalClosedRequestList=[],this.newRequestAddress="",this.RequestParamTypes={opened:"opened",closed:"closed"},this.currentRequestType=this.RequestParamTypes.opened,this.pagination=new o.a,this.pagination.additionalParams={type:this.RequestParamTypes.opened},this.pagination.url=$,this.querySubscription=this.activatedRoute.queryParams.subscribe(e=>{this.pagination.page=e.page||this.pagination.page,this.pagination.perPage=e.per_page||this.pagination.perPage,this.currentRequestType=e.type||this.RequestParamTypes.opened,this.getAnimalsFindRequests()})}ngOnDestroy(){this.querySubscription.unsubscribe()}getAnimalsFindRequests(){const e=(new s.f).appendAll(Object.assign(Object.assign({},this.pagination.getQueryParams()),{type:this.currentRequestType}));this.currentRequestType!==this.RequestParamTypes.closed?this.httpClient.get(I,{params:e,observe:"response"}).subscribe(e=>{e.body&&(this.animalOpenedRequestList=x.convertOpenedAnimalFindRequestGetResponseToOpenedAnimalFindRequest(e.body),this.pagination.setFromResponseHeaders(e.headers))}):this.httpClient.get(T,{params:e,observe:"response"}).subscribe(e=>{e.body&&(this.animalClosedRequestList=x.convertClosedAnimalFindRequestGetResponseToClosedAnimalFindRequest(e.body),this.pagination.setFromResponseHeaders(e.headers))})}closeAnimalFindRequest(e){this.httpClient.patch(`${I}/${e}`,null).subscribe(e=>{this.getAnimalsFindRequests()},e=>this.submitErrorHandler(e))}createAnimalFindRequest(){const e={address:this.newRequestAddress},t=new s.e({"Content-Type":"application/json; charset=utf-8"});this.httpClient.post(I,JSON.stringify(e),{headers:t}).subscribe(()=>{this.getAnimalsFindRequests(),this.newRequestAddress=""},e=>this.submitErrorHandler(e))}changeQueryFilterParams(e){this.currentRequestType=e,this.pagination.additionalParams={type:e},this.router.navigate([$],{queryParams:{type:e}})}submitErrorHandler(e){alert("\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0456\u0434\u043f\u0440\u0430\u0432\u0446\u0456 \u0444\u043e\u0440\u043c\u0438: "+e.message)}}return e.\u0275fac=function(t){return new(t||e)(d.Ib(s.b),d.Ib(b.a),d.Ib(a.a),d.Ib(a.b))},e.\u0275cmp=d.Cb({type:e,selectors:[["app-admin-animals-find-requests"]],decls:15,vars:9,consts:[[1,"root-container"],[1,"new-request-section"],["for","address-input",1,"label"],["id","address-input","type","text",1,"input",3,"ngModel","ngModelChange"],["type","button",1,"button",3,"disabled","click"],[1,"two-buttons-container"],[1,"button",3,"click"],[4,"ngIf"],[3,"pagination"],[1,"table"],[4,"ngFor","ngForOf"],[1,"button","center-button",3,"click"]],template:function(e,t){1&e&&(d.Nb(0,"div",0),d.Nb(1,"section",1),d.Nb(2,"label",2),d.nc(3,"\u0410\u0434\u0440\u0435\u0441\u0430: "),d.Mb(),d.Nb(4,"input",3),d.Ub("ngModelChange",function(e){return t.newRequestAddress=e}),d.Mb(),d.Nb(5,"button",4),d.Ub("click",function(){return t.createAnimalFindRequest()}),d.nc(6,"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u0437\u0430\u044f\u0432\u043a\u0443 "),d.Mb(),d.Mb(),d.Nb(7,"div",5),d.Nb(8,"button",6),d.Ub("click",function(){return t.changeQueryFilterParams(t.RequestParamTypes.opened)}),d.nc(9,"\u0412\u0456\u0434\u043a\u0440\u0438\u0442\u0456 "),d.Mb(),d.Nb(10,"button",6),d.Ub("click",function(){return t.changeQueryFilterParams(t.RequestParamTypes.closed)}),d.nc(11,"\u0417\u0430\u043a\u0440\u0438\u0442\u0456 "),d.Mb(),d.Mb(),d.lc(12,D,14,1,"section",7),d.lc(13,_,16,1,"section",7),d.Jb(14,"app-pagination",8),d.Mb()),2&e&&(d.yb(4),d.bc("ngModel",t.newRequestAddress),d.yb(1),d.bc("disabled",!t.newRequestAddress),d.yb(3),d.Ab("not-selected-button",t.currentRequestType===t.RequestParamTypes.closed),d.yb(2),d.Ab("not-selected-button",t.currentRequestType===t.RequestParamTypes.opened),d.yb(2),d.bc("ngIf",t.currentRequestType===t.RequestParamTypes.opened),d.yb(1),d.bc("ngIf",t.currentRequestType===t.RequestParamTypes.closed),d.yb(1),d.bc("pagination",t.pagination))},directives:[h.b,h.i,h.k,n.j,o.b,n.i],styles:[".root-container[_ngcontent-%COMP%]{padding:10px;display:grid;grid-gap:25px}.new-request-section[_ngcontent-%COMP%]{justify-content:left;align-content:center}.new-request-section[_ngcontent-%COMP%], .two-buttons-container[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column}.not-selected-button[_ngcontent-%COMP%]{border-color:rgb(var(--default-component-background-color));background-color:#fff;color:#000}.center-button[_ngcontent-%COMP%]{margin:0 auto}"]}),e})()},{path:":id",component:F},{path:"",redirectTo:"list"}];var H=i("FpXt");let U=(()=>{class e{}return e.\u0275mod=d.Gb({type:e}),e.\u0275inj=d.Fb({factory:function(t){return new(t||e)},imports:[[n.b,a.e.forChild(L),h.h,H.a,h.m]]}),e})()}}]);